{% extends "base.html" %}
{% load static %}

{% block content %}

<h2>Detalle de sala: {{ sala.nombre }}</h2>

<p><strong>Capacidad:</strong> {{ sala.capacidad }}</p>
<p><strong>Estado:</strong> 
    {% if sala.disponible %}
        <span style="color: green;">Disponible</span>
    {% else %}
        <span style="color: red;">Ocupada</span>
    {% endif %}
</p>

<hr>

<h3>Reservas de esta sala</h3>

{% if reservas %}
    <table class="tabla">
        <thead>
            <tr>
                <th>Persona</th>
                <th>Inicio</th>
                <th>Fin</th>
                {% if user.is_staff %}
                    <th>Acciones</th>
                {% endif %}
            </tr>
        </thead>

        <tbody>
        {% for r in reservas %}
            <tr>
                <td>{{ r.persona }}</td>
                <td>{{ r.inicio }}</td>
                <td>{{ r.fin }}</td>

                {% if user.is_staff %}
                <td>
                    <a class="btn-small" href="{% url 'reserva_editar' r.id %}">Editar</a>
                    <a class="btn-small btn-danger"
                       href="{% url 'reserva_eliminar' r.id %}"
                       onclick="return confirm('¿Eliminar reserva?');">
                       Eliminar
                    </a>
                </td>
                {% endif %}
            </tr>
        {% endfor %}
        </tbody>
    </table>
{% else %}
    <p>No hay reservas para esta sala.</p>
{% endif %}

<hr>

{% if user.is_authenticated %}
    <a class="btn" href="{% url 'reservar' %}">Crear nueva reserva</a>
{% else %}
    <p>Debe iniciar sesión para reservar.</p>
{% endif %}

{% endblock %}

